<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>互动菜单</title>
  <!-- 引入Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- 引入Font Awesome -->
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  
  <!-- 配置Tailwind自定义颜色和字体 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#6366f1',
            secondary: '#f97316',
            accent: '#ec4899',
            dark: '#1e293b',
            light: '#f8fafc'
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
          },
        },
      }
    }
  </script>
  
  <!-- 自定义工具类 -->
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .menu-open {
        transform: translateX(280px);
      }
      .menu-closed {
        transform: translateX(0);
      }
      .sidebar-open {
        transform: translateX(0);
      }
      .sidebar-closed {
        transform: translateX(-100%);
      }
      .transition-all-300 {
        transition: all 0.3s ease-in-out;
      }
    }
  </style>
  
  <style>
    body {
      overflow-x: hidden;
    }
    
    /* 平滑滚动 */
    html {
      scroll-behavior: smooth;
    }
    
    /* 自定义滚动条 */
    ::-webkit-scrollbar {
      width: 8px;
    }
    
    ::-webkit-scrollbar-track {
      background: #f1f1f1;
    }
    
    ::-webkit-scrollbar-thumb {
      background: #c5c5c5;
      border-radius: 4px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: #a8a8a8;
    }
  </style>
</head>
<body class="bg-gray-50 text-dark font-sans">
  <!-- 顶部导航栏 -->
  <header class="fixed top-0 left-0 right-0 bg-white shadow-md z-50 transition-all duration-300" id="header">
    <div class="container mx-auto px-4 py-3 flex items-center justify-between">
      <!-- 菜单按钮 -->
      <button id="menuBtn" class="p-2 rounded-full hover:bg-gray-100 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-primary/50">
        <i class="fa fa-bars text-xl text-primary"></i>
      </button>
      
      <!-- 网站标题 -->
      <h1 class="text-xl font-bold text-primary" data-i18n="siteTitle">互动菜单</h1>
      
      <!-- 右侧功能区 -->
      <div class="flex items-center space-x-2">
        <!-- 语言切换 -->
        <div class="relative">
          <button id="langBtn" class="flex items-center space-x-1 px-3 py-1.5 rounded-full bg-gray-100 hover:bg-gray-200 transition-all duration-300">
            <i class="fa fa-globe text-primary"></i>
            <span id="currentLang">中文</span>
            <i class="fa fa-chevron-down text-xs text-gray-500"></i>
          </button>
          <div id="langDropdown" class="absolute right-0 mt-2 w-36 bg-white rounded-lg shadow-lg py-2 hidden z-50">
            <a href="#" class="lang-option block px-4 py-2 hover:bg-gray-100 transition-all duration-200" data-lang="zh-CN">中文</a>
            <a href="#" class="lang-option block px-4 py-2 hover:bg-gray-100 transition-all duration-200" data-lang="en">English</a>
          </div>
        </div>
        
        <!-- 切换背景音乐按钮 -->
        <button id="musicBtn" class="p-2 rounded-full hover:bg-gray-100 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-primary/50">
          <i class="fa fa-music text-xl text-primary"></i>
        </button>
      </div>
    </div>
    
    <!-- 顶部交互按钮 -->
    <div class="bg-gray-50 border-t border-gray-100 py-2 px-4">
      <div class="container mx-auto flex flex-wrap gap-2">
        <button id="catBtn" class="px-4 py-2 bg-secondary text-white rounded-full hover:bg-secondary/90 transition-all duration-300 shadow-sm hover:shadow flex items-center">
          <i class="fa fa-paw mr-2"></i>
          <span data-i18n="catBtn">给猫猫吃小鱼干喵～</span>
        </button>
        
        <button id="pingBtn" class="px-4 py-2 bg-accent text-white rounded-full hover:bg-accent/90 transition-all duration-300 shadow-sm hover:shadow flex items-center">
          <i class="fa fa-exchange mr-2"></i>
          <span data-i18n="pingBtn">ping~pong~</span>
        </button>
        
        <button id="bgMusicBtn" class="px-4 py-2 bg-primary text-white rounded-full hover:bg-primary/90 transition-all duration-300 shadow-sm hover:shadow flex items-center">
          <i class="fa fa-volume-up mr-2"></i>
          <span data-i18n="musicBtn">切换背景音乐</span>
        </button>
      </div>
    </div>
  </header>

  <!-- 主内容区 -->
  <div class="flex min-h-screen pt-24" id="mainContainer">
    <!-- 侧边菜单 -->
    <aside id="sidebar" class="fixed top-24 left-0 bottom-0 w-72 bg-white shadow-xl z-40 sidebar-closed transition-all duration-300 overflow-y-auto">
      <div class="p-5">
        <h2 class="text-lg font-semibold mb-4 pb-2 border-b border-gray-200" data-i18n="menuTitle">菜单选项</h2>
        <ul class="space-y-1">
          <li>
            <a href="index.html" class="flex items-center px-3 py-2 rounded-lg hover:bg-gray-100 transition-all duration-200">
              <i class="fa fa-home w-6 text-gray-500"></i>
              <span data-i18n="menu.home">首页</span>
            </a>
          </li>
          <li>
            <a href="#setting" class="flex items-center px-3 py-2 rounded-lg hover:bg-gray-100 transition-all duration-200">
              <i class="fa fa-cog w-6 text-gray-500"></i>
              <span data-i18n="menu.settings">设置</span>
            </a>
          </li>
          <li>
            <a href="#about" class="flex items-center px-3 py-2 rounded-lg hover:bg-gray-100 transition-all duration-200">
              <i class="fa fa-info-circle w-6 text-gray-500"></i>
              <span data-i18n="menu.about">关于</span>
            </a>
          </li>
          <li>
            <a href="#help" class="flex items-center px-3 py-2 rounded-lg hover:bg-gray-100 transition-all duration-200">
              <i class="fa fa-question-circle w-6 text-gray-500"></i>
              <span data-i18n="menu.help">帮助</span>
            </a>
          </li>
        </ul>
        
        <div class="mt-8 pt-4 border-t border-gray-200">
          <h3 class="text-sm font-medium text-gray-500 mb-3" data-i18n="menu.language">语言设置</h3>
          <div class="grid grid-cols-2 gap-2">
            <button class="lang-btn px-3 py-2 rounded-lg border border-gray-200 hover:bg-gray-50 transition-all duration-200" data-lang="zh-CN">中文</button>
            <button class="lang-btn px-3 py-2 rounded-lg border border-gray-200 hover:bg-gray-50 transition-all duration-200" data-lang="en">English</button>
          </div>
        </div>
      </div>
    </aside>
    
    <!-- 遮罩层 -->
    <div id="overlay" class="fixed inset-0 bg-black/50 z-30 hidden transition-opacity duration-300"></div>
    
    <!-- 主内容 -->
    <main id="content" class="flex-1 menu-closed transition-all duration-300 px-4 py-6">
      <div class="container mx-auto bg-white rounded-xl shadow-md p-6 max-w-4xl">
        <h2 class="text-2xl font-bold mb-4 text-primary" data-i18n="main.title">欢迎使用互动菜单</h2>
        
        <p class="text-gray-600 mb-6" data-i18n="main.description">
          点击左上角的菜单按钮可以打开侧边栏，侧边栏会将主内容区域向右推。尝试使用顶部的按钮进行互动，包括喂猫猫吃小鱼干、测试ping-pong延迟和切换背景音乐。
        </p>
        
        <div class="bg-gray-50 rounded-lg p-5 mb-6">
          <h3 class="font-semibold mb-3 text-lg" data-i18n="main.interactionTitle">交互反馈区</h3>
          <div id="feedbackArea" class="min-h-[100px] p-4 bg-white rounded border border-gray-200">
            <p class="text-gray-500 italic" data-i18n="main.feedbackHint">在这里将显示交互反馈...</p>
          </div>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-5 border border-blue-100">
            <h3 class="font-semibold mb-2 flex items-center text-blue-600">
              <i class="fa fa-lightbulb-o mr-2"></i>
              <span data-i18n="main.features.title1">菜单交互</span>
            </h3>
            <p class="text-gray-600 text-sm" data-i18n="main.features.desc1">点击菜单按钮，侧边栏会平滑滑出，同时主内容区域向右移动，创造流畅的用户体验。</p>
          </div>
          
          <div class="bg-gradient-to-br from-orange-50 to-pink-50 rounded-lg p-5 border border-orange-100">
            <h3 class="font-semibold mb-2 flex items-center text-orange-600">
              <i class="fa fa-comments mr-2"></i>
              <span data-i18n="main.features.title2">猫咪互动</span>
            </h3>
            <p class="text-gray-600 text-sm" data-i18n="main.features.desc2">给猫咪喂小鱼干，它会有不同的反应。尝试喂三次看看会发生什么！</p>
          </div>
        </div>
      </div>
    </main>
  </div>
  
  <!-- 音频元素 -->
  <audio id="bgMusic" loop>
    <source src="https://m801.music.126.net/20251025161713/ffed59b767c982e0d6cea2a42264deee/jdymusic/obj/wo3DlMOGwrbDjj7DisKw/30324516634/d3c0/5b2b/bcba/9236539d88b329985bf3623e09a6e64c.mp3?vuutv=NUbcyDjmSxzWh5XnkfXe3iC9wUI6U65Q8DC7uZBT+9rolR1GDUzihWG/lRV24qC2Ys7FHA2h0eSz0LFT2BZZlnPe5/NXTBQwz2e3Jit5ZoQ=&cdntag=bWFyaz1vc193ZWIscXVhbGl0eV9zdGFuZGFyZA" type="audio/mpeg">
   您的浏览器不支持音频元素。
  </audio>
  
  <audio id="pingSound" preload="auto">
    <source src="http://music.163.com/song/media/outer/url?id=29947420.mp3" type="audio/mpeg">
   您的浏览器不支持音频元素。
  </audio>
  
  <audio id="catSound" preload="auto">
    <source src="https://assets.mixkit.co/sfx/preview/mixkit-cat-meow-623.mp3" type="audio/mpeg">
   您的浏览器不支持音频元素。
  </audio>

  <script>
    // 国际化文本数据
    const i18n = {
      "zh-CN": {
        "siteTitle": "互动菜单演示",
        "catBtn": "给猫猫吃小鱼干喵～",
        "pingBtn": "ping~pong~",
        "musicBtn": "切换背景音乐",
        "menuTitle": "菜单选项",
        "menu.home": "首页",
        "menu.settings": "设置",
        "menu.about": "关于",
        "menu.help": "帮助",
        "menu.language": "语言设置",
        "main.title": "欢迎使用互动菜单",
        "main.description": "点击左上角的菜单按钮可以打开侧边栏，侧边栏会将主内容区域向右推。尝试使用顶部的按钮进行互动，包括喂猫猫吃小鱼干、测试ping-pong延迟和切换背景音乐。",
        "main.interactionTitle": "交互反馈区",
        "main.feedbackHint": "在这里将显示交互反馈...",
        "main.features.title1": "菜单交互",
        "main.features.desc1": "点击菜单按钮，侧边栏会平滑滑出，同时主内容区域向右移动，创造流畅的用户体验。",
        "main.features.title2": "猫咪互动",
        "main.features.desc2": "给猫咪喂小鱼干，它会有不同的反应。尝试喂三次看看会发生什么！",
        "feedback.ping": "ping... pong! (延迟: {{delay}}ms)",
        "feedback.musicOn": "背景音乐已开启",
        "feedback.musicOff": "背景音乐已关闭"
      },
      "en": {
        "siteTitle": "Interactive Menu Demo",
        "catBtn": "Feed the cat fish snacks meow～",
        "pingBtn": "ping~pong~",
        "musicBtn": "Toggle background music",
        "menuTitle": "Menu Options",
        "menu.home": "Home",
        "menu.settings": "Settings",
        "menu.about": "About",
        "menu.help": "Help",
        "menu.language": "Language Settings",
        "main.title": "Welcome to Interactive Menu",
        "main.description": "Click the menu button in the top left corner to open the sidebar, which will push the main content area to the right. Try using the buttons at the top to interact, including feeding the cat fish snacks, testing ping-pong delay, and toggling background music.",
        "main.interactionTitle": "Interaction Feedback Area",
        "main.feedbackHint": "Interaction feedback will be displayed here...",
        "main.features.title1": "Menu Interaction",
        "main.features.desc1": "Click the menu button, and the sidebar will slide out smoothly while the main content area moves to the right, creating a smooth user experience.",
        "main.features.title2": "Cat Interaction",
        "main.features.desc2": "Feed the cat fish snacks and it will have different reactions. Try feeding it three times to see what happens!",
        "feedback.ping": "ping... pong! (delay: {{delay}}ms)",
        "feedback.musicOn": "Background music turned on",
        "feedback.musicOff": "Background music turned off"
      }
    };
    
    // DOM元素
    const menuBtn = document.getElementById('menuBtn');
    const sidebar = document.getElementById('sidebar');
    const content = document.getElementById('content');
    const overlay = document.getElementById('overlay');
    const catBtn = document.getElementById('catBtn');
    const pingBtn = document.getElementById('pingBtn');
    const musicBtn = document.getElementById('musicBtn');
    const bgMusicBtn = document.getElementById('bgMusicBtn');
    const feedbackArea = document.getElementById('feedbackArea');
    const bgMusic = document.getElementById('bgMusic');
    const pingSound = document.getElementById('pingSound');
    const catSound = document.getElementById('catSound');
    const langBtn = document.getElementById('langBtn');
    const langDropdown = document.getElementById('langDropdown');
    const currentLangEl = document.getElementById('currentLang');
    const langOptions = document.querySelectorAll('.lang-option, .lang-btn');
    
    // 状态变量
    let menuOpen = false;
    let musicPlaying = false;
    let catFeedCount = 0;
    let currentLang = 'zh-CN';
    
    // 猫咪回复
    const catResponses = [
      "喵呜～",
      "好吃喵",
      "好耶！谢谢喵~",
      "唔……吃不下了喵……"
    ];
    
    const catResponsesEn = [
      "Meow～",
      "Yummy meow",
      "Yay! Thank you meow~",
      "Hmm... Can't eat anymore meow..."
    ];
    
    // 切换菜单
    function toggleMenu() {
      menuOpen = !menuOpen;
      
      if (menuOpen) {
        sidebar.classList.remove('sidebar-closed');
        sidebar.classList.add('sidebar-open');
        content.classList.remove('menu-closed');
        content.classList.add('menu-open');
        overlay.classList.remove('hidden');
        setTimeout(() => {
          overlay.classList.add('opacity-100');
        }, 10);
        menuBtn.innerHTML = '<i class="fa fa-times text-xl text-primary"></i>';
      } else {
        sidebar.classList.remove('sidebar-open');
        sidebar.classList.add('sidebar-closed');
        content.classList.remove('menu-open');
        content.classList.add('menu-closed');
        overlay.classList.remove('opacity-100');
        setTimeout(() => {
          overlay.classList.add('hidden');
        }, 300);
        menuBtn.innerHTML = '<i class="fa fa-bars text-xl text-primary"></i>';
      }
    }
    
    // 切换语言
    function changeLanguage(lang) {
      if (!i18n[lang]) return;
      
      currentLang = lang;
      currentLangEl.textContent = lang === 'zh-CN' ? '中文' : 'English';
      
      // 更新所有带data-i18n属性的元素
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (i18n[lang][key]) {
          el.textContent = i18n[lang][key];
        }
      });
      
      // 关闭语言下拉菜单
      langDropdown.classList.add('hidden');
    }
    
    // 显示反馈信息
    function showFeedback(message, isCat = false) {
      const feedbackEl = document.createElement('div');
      feedbackEl.className = `mb-2 p-3 rounded-lg ${isCat ? 'bg-orange-50 border border-orange-100 text-orange-800' : 'bg-blue-50 border border-blue-100 text-blue-800'}`;
      feedbackEl.textContent = message;
      
      // 如果是第一个反馈，清空提示文本
      if (feedbackArea.querySelector('.italic')) {
        feedbackArea.innerHTML = '';
      }
      
      feedbackArea.prepend(feedbackEl);
      
      // 添加淡入动画
      setTimeout(() => {
        feedbackEl.classList.add('opacity-100');
      }, 10);
      
      // 自动滚动到底部
      feedbackArea.scrollTop = feedbackArea.scrollHeight;
    }
    
    // 事件监听
    menuBtn.addEventListener('click', toggleMenu);
    overlay.addEventListener('click', toggleMenu);
    
    // 猫咪按钮点击事件
    catBtn.addEventListener('click', () => {
      catSound.play();
      catFeedCount++;
      
      let response;
      if (currentLang === 'zh-CN') {
        response = catFeedCount <= 3 ? catResponses[catFeedCount - 1] : catResponses[3];
      } else {
        response = catFeedCount <= 3 ? catResponsesEn[catFeedCount - 1] : catResponsesEn[3];
      }
      
      showFeedback(response, true);
      
      // 添加按钮动画
      catBtn.classList.add('scale-95');
      setTimeout(() => {
        catBtn.classList.remove('scale-95');
      }, 200);
    });
    
    // Ping按钮点击事件
    pingBtn.addEventListener('click', () => {
      const startTime = performance.now();
      
      // 模拟网络延迟
      const delay = Math.floor(Math.random() * 300) + 50;
      
      setTimeout(() => {
        const endTime = performance.now();
        const actualDelay = Math.floor(endTime - startTime);
        
        pingSound.play();
        
        let message;
        if (currentLang === 'zh-CN') {
          message = i18n['zh-CN']['feedback.ping'].replace('{{delay}}', actualDelay);
        } else {
          message = i18n['en']['feedback.ping'].replace('{{delay}}', actualDelay);
        }
        
        showFeedback(message);
        
        // 添加按钮动画
        pingBtn.classList.add('scale-95');
        setTimeout(() => {
          pingBtn.classList.remove('scale-95');
        }, 200);
      }, delay);
    });
    
    // 背景音乐按钮点击事件
    function toggleMusic() {
      musicPlaying = !musicPlaying;
      
      if (musicPlaying) {
        bgMusic.play().catch(e => {
          console.log("无法自动播放音乐:", e);
          musicPlaying = false;
        });
        musicBtn.innerHTML = '<i class="fa fa-volume-off text-xl text-primary"></i>';
        bgMusicBtn.innerHTML = '<i class="fa fa-volume-off mr-2"></i><span data-i18n="musicBtn">切换背景音乐</span>';
        showFeedback(currentLang === 'zh-CN' ? i18n['zh-CN']['feedback.musicOn'] : i18n['en']['feedback.musicOn']);
      } else {
        bgMusic.pause();
        musicBtn.innerHTML = '<i class="fa fa-music text-xl text-primary"></i>';
        bgMusicBtn.innerHTML = '<i class="fa fa-volume-up mr-2"></i><span data-i18n="musicBtn">切换背景音乐</span>';
        showFeedback(currentLang === 'zh-CN' ? i18n['zh-CN']['feedback.musicOff'] : i18n['en']['feedback.musicOff']);
      }
    }
    
    musicBtn.addEventListener('click', toggleMusic);
    bgMusicBtn.addEventListener('click', toggleMusic);
    
    // 语言切换事件
    langBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      langDropdown.classList.toggle('hidden');
    });
    
    langOptions.forEach(option => {
      option.addEventListener('click', (e) => {
        e.preventDefault();
        const lang = option.getAttribute('data-lang');
        changeLanguage(lang);
      });
    });
    
    // 点击页面其他地方关闭语言下拉菜单
    document.addEventListener('click', () => {
      langDropdown.classList.add('hidden');
    });
    
    // 阻止下拉菜单内部点击事件冒泡
    langDropdown.addEventListener('click', (e) => {
      e.stopPropagation();
    });
    
    // 滚动时改变导航栏样式
    window.addEventListener('scroll', () => {
      const header = document.getElementById('header');
      if (window.scrollY > 10) {
        header.classList.add('py-2', 'shadow');
        header.classList.remove('py-3');
      } else {
        header.classList.add('py-3');
        header.classList.remove('py-2', 'shadow');
      }
    });
  </script>
</body>
</html>